<template>
  <div class="auth-container">
    <div class="auth-card">
      <!-- 로그인 및 회원가입 폼 전환 애니메이션 -->
      <transition :name="transitionName" mode="out-in">
        <!-- 로그인 폼 -->
        <form v-if="isLoginVisible" @submit.prevent="handleLogin" key="login">
          <h2>로그인</h2>
          <div class="input-group">
            <input
              type="email"
              v-model="loginForm.email"
              placeholder="이메일"
              @focus="isEmailFocused = true"
              @blur="validateEmail(loginForm.email)"
              :class="{ focused: isEmailFocused }"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="password"
              v-model="loginForm.password"
              placeholder="비밀번호"
              @focus="isPasswordFocused = true"
              @blur="isPasswordFocused = false"
              :class="{ focused: isPasswordFocused }"
              required
            />
          </div>
          <div class="checkbox-group">
            <label>
              <input type="checkbox" v-model="loginForm.rememberMe" />
              <span>Remember me</span>
            </label>
          </div>
          <button type="submit" :disabled="!isLoginFormValid">로그인</button>
          <p class="switch-form">
            계정이 없으신가요?
            <span @click="toggleCard">회원가입</span>
          </p>
        </form>

        <!-- 회원가입 폼 -->
        <form v-else @submit.prevent="handleRegister" key="register">
          <h2>회원가입</h2>
          <div class="input-group">
            <input
              type="email"
              v-model="registerForm.email"
              placeholder="이메일"
              @focus="isRegisterEmailFocused = true"
              @blur="validateEmail(registerForm.email)"
              :class="{ focused: isRegisterEmailFocused }"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="password"
              v-model="registerForm.password"
              placeholder="비밀번호"
              @focus="isRegisterPasswordFocused = true"
              @blur="isRegisterPasswordFocused = false"
              :class="{ focused: isRegisterPasswordFocused }"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="password"
              v-model="registerForm.confirmPassword"
              placeholder="비밀번호 확인"
              @focus="isConfirmPasswordFocused = true"
              @blur="isConfirmPasswordFocused = false"
              :class="{ focused: isConfirmPasswordFocused }"
              required
            />
          </div>
          <div class="checkbox-group">
            <label>
              <input type="checkbox" v-model="registerForm.acceptTerms" />
              <span>약관에 동의합니다</span>
            </label>
          </div>
          <button type="submit" :disabled="!isRegisterFormValid">회원가입</button>
          <p class="switch-form">
            이미 계정이 있으신가요?
            <span @click="toggleCard">로그인</span>
          </p>
        </form>
      </transition>
    </div>
  </div>
</template>
